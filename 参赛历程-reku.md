### 初赛
我们很早就听说了华为软件精英挑战赛，但是最开始并没有想着参赛，觉得那么多学校队伍参赛，就算有奖金也轮不到我们来拿，而且也有认识的同学参加了去年的软挑，最后喜迎一轮游。后来初赛已经进行了好多天，才被冼学长拉着参赛。因为赛事规则是交通车辆调度，我们先想了队伍口号“已经在路上了”，然后根据这个“已经在路上了”的鸽子表情包，决定了我们的队名叫“咕咕咕”。这个队名其实也隐含了我们信心不足，可能在中途会鸽掉比赛的含义。

最开始的一周我们三个人苦读交通规则，但是并没有什么特别好的思路，对于死锁解决的思路更是一头雾水。姜学长表示我们应该要写一个判题器，这样至少可以方便的调参，不然会被提交次数限制调参的次数。但是当时我觉得既然是初赛取前32名，应该瞎搞搞就可以进复赛了，而且留给我们的时间也不太多了。最后决定三个人分头乱搞，谁搞的结果比较好就用谁的。每个人的思路基本都是用最短路和每批发车数量来乱调参，不停尝试直到没有死锁。姜学长写出了一个不是很准确的但是对调参很有帮助的判题器，进行了迅猛调参，在比赛前夜冲到了赛区第三，是我们三个里面的最好成绩。所以我们最后采用了姜学长的调度程序，这个程序就成为了我们后来每一版程序的基础，姜学长也成为了本次比赛的主代码手。

在正式赛的时候，因为调参过于迅猛，参数出现了严重的过拟合。正式赛数据量很大，而我们的判题器跑的速度也很慢，调度时间和死锁更判不准，在正式赛中无法跑出符合期望的结果。看到群里大佬们不停的秀出自己成绩的截图，我们的心情也越来越苦涩...幸运的是最后我们获得了赛区24名，有惊无险的进入杭厦赛区复赛，如果是在成渝或者西北赛区，我们就一轮游了。

### 复赛
初赛的结果告诉了我们，我们的调参能力是不太行的，而且因为复赛预制车辆的加入，整个道路会更加容易死锁，如果想取得好一点的成绩，必须要利用判题器生成没有死锁的答案。经过我们的讨论，我们选择了按时间片枚举，二分每个时刻出发车辆数的算法框架，二分的时候用判题器进行快速的判断。这是一个很重要而且很幸运的决策，到最后决赛我们的整体算法也没有脱离这个思路，而且根据决赛颁奖仪式上出题老师们的比较来看，我们这个通过二分激进的发车确实要比均匀发车的效果要好。但是这个算法一次要跑好多遍判题器，对判题器的速度要求很高，而且我们的判题器还有很多bug，所以当务之急就是要尽快的优化和修正判题器。

确定这个思路没几天，我们就利用了错误的判题器幸运的跑出了4600多的成绩，从这个成绩开始我们就踏上了漫长的“霸榜”之路。这个成绩给了我们很大鼓励，之前我们并不认为我们有希望进入全国总决赛，但是出了这个成绩之后，我们甚至还想在全国总决赛上面拿奖。虽然这个成绩很不错，但是我们只要稍微调整一下参数，就会产生死锁，而且本地的判题器无法检测，这让我们非常苦恼。后续的工作基本都是在优化判题器速度和修正判题器正确性。我们三个人都一遍一遍的调试检查代码，对着论坛上面的判题器流程图和自己的代码度过了无数个难眠的夜晚，期间也检查出了许多bug，但是最后结果还是无法一致，后来我们甚至想到用其他语言重写一个判题器跟我们的C++判题器进行对拍...最后终于，冼学长凭借着老辣的代码经验，找到了一个隐藏在深处的逻辑bug，我们终于获得了一个跟线上完全一致的高速判题器！就是这个判题器成为了我们夺冠的最重要的法宝。

来到了杭研院的正式赛现场，我们的心情还是非常紧张的。我们当时需要调整大概七个参数，在讨论并实现完需求变更之后，就一直在调参。结果忙中有错，因为正式赛是两张地图，有的时候调参只是一个地图效果好而另一个地图效果很差。在还有二十多分钟结束比赛的时候，我提交了一个在图一上面效果很好的代码，结果跑完发现在图二上面的效果特别差，还不如我们最开始修改完需求提交的成绩，跟我们调出来的最佳成绩更是差了十万八千里。这时比赛还有十分钟结束，如果现在提交代码，肯定在比赛结束前无法跑出结果，而且我们之前比较优的参数的打包文件还因为误操作并没有保存。这时我还是决定回忆一个比较优的参数，然后紧张提交一发...全场的参赛队员都去参加华为的家庭日活动了，只有我们三个还有HR哥哥在盯着屏幕看我们最后一发的结果，因为如果这次提交死锁，我们之前的努力就都白费了。所幸最后跑出了2498的总成绩，虽然离我们的历史最佳2480还差一点点，但是也还算不错。后来出了结果，我们还发觉我们的复赛正式赛成绩是全国第一，非常激动，给了我们非常大的信心。

### 决赛
决赛的时候增加了车牌识别的需求，姜学长在决赛阶段继续主要负责车辆调度算法的调整，所以车牌识别部分就由我跟冼学长来负责。因为我们三个人基本都没有任何CV的经验，开始的时候我们讨论了很多思路，也参考了很多业界成熟的做法，也通过HR结识了一些车牌识别的专家与我们进行讨论。我觉得主要的困难在于数据量不足，模型方面倒是比较简单。起初想用GAN来生成数据用于训练，后来通过观测数据，我们觉得本来给我们的车牌就不够真实，再用给我们的虚假的车牌去训练GAN网络生成更加虚假的车牌，效果应该不会很好。于是我们形成了两套方案，第一套是通过opencv等方式完全自己生成训练集，训练集中没有任何官方给出的数据；第二套方案就是简单的划分官方数据为训练集和测试集然后进行训练。我跟冼学长每个思路各实现一个，发现两个思路的效果其实差不多，决定现场赛的时候看实际的效果来选择模型。

在车辆调度部分，因为在复赛的时候因为调参，出现了很多差错，而且决赛的赛制跟复赛还有很大的差异：决赛时期的地图是看不到的，所以直接对着某些地图调参可能并没有什么用。于是对大部分参数，都调整到一个比较优的状态，然后对一个比较关键的参数在程序里面直接进行二分。在寻路优化算法这方面，我们也添加了很多统计量，效果也优化了不少。

调整好车牌识别之后，我们也一直在练习赛中登顶，但是成渝赛区和江山赛区的很多队伍跟我们在练习赛的成绩也很接近。在比赛现场，我们的位置跟最接近我们的FatCat队背靠背，看到这个位置安排之后，我们三个都感觉心里一紧...

正式竞赛的前半段还是比较轻松的，很快实现了需求变更，提交之后感觉优化效果也不错，最主要的是没有任何参数可以调整，所以有段时间觉得无所事事。但是在最后半小时我们突然发现，本地判题器的全部车辆总调度时间跟线上的对不上，顿时产生了“我们判题器写错了，我们要死锁了”的想法。后来经过冷静阅读任务书，发现总调度时间要看每个车辆的单独识别率，我们根本无从得知这个单独识别率，所谓的本地和线上对不上只是自己吓自己。不过这么明显的问题，我们在练习赛的时候竟然没有发现，感觉之前做的工作还是有一些不足。

虽然我们获得了全国总冠军，但是过程中并没有像想象中的一骑绝尘。在某一轮中，我们被亚军的江山赛区的队伍超过；在之前的一轮的复盘过程中，我们还发现所有队伍中调度时间最短的那支队伍，车牌识别率竟然只有百分之五十，如果他们的车牌识别做的好一点，恐怕冠军就要易主了。

最后，感谢华为，感谢软挑，明年咕咕咕还会再来的！

